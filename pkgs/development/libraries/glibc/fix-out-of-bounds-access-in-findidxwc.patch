diff -ur glibc-2.27/locale/weightwc.h glibc-2.27-patched/locale/weightwc.h
--- glibc-2.27/locale/weightwc.h	2018-02-02 01:17:18.000000000 +0900
+++ glibc-2.27-patched/locale/weightwc.h	2020-01-12 03:33:41.519720579 +0900
@@ -73,7 +73,7 @@
 	      break;
 	  DIAG_POP_NEEDS_COMMENT;
 
-	  if (cnt == nhere)
+	  if (cnt == nhere || cnt == len)
 	    {
 	      /* Found it.  */
 	      *cpp += nhere;
@@ -100,13 +100,13 @@
 	      continue;
 	    }
 
-	  if (cp[nhere - 1] > usrc[nhere -1])
+	  if (cp[nhere - 1] > usrc[nhere - 1])
 	    {
 	      cp += 2 * nhere;
 	      continue;
 	    }
 
-	  if (cp[2 * nhere - 1] < usrc[nhere -1])
+	  if (cp[2 * nhere - 1] < usrc[nhere - 1])
 	    {
 	      cp += 2 * nhere;
 	      continue;
